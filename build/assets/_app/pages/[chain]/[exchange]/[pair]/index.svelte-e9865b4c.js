import{S as vt,i as kt,s as yt,a5 as bt,a0 as _t,a1 as ft,e as c,k as b,t as l,j as oe,X as Tt,c as _,d as o,n as T,a as h,g as i,m as ce,b as u,a6 as fa,Q as e,f as ht,o as _e,h as k,a2 as mt,x as fe,u as he,v as me}from"../../../../chunks/vendor-475ceb10.js";/* empty css                                  */import{T as ha,b as ut}from"../../../../chunks/TimeSpanPerformance-96a57b47.js";import{a as Ie,b as dt}from"../../../../chunks/formatters-70d542d8.js";import St,{fromHashToTimeBucket as wt}from"./TimeBucketSelector.svelte-61009378.js";import Et from"./CandleStickChart.svelte-b8816935.js";import"../../../../chunks/preload-helper-ec9aa979.js";function Dt(t){let g,m,v,y,s,p,S=t[4].pair_symbol+"",B,J,P,K=t[5].exchange_name+"",re,se,A,N,le=t[5].chain_name+"",R,ue,Ce,n,L,q=t[4].pair_name+"",G,M,w,V=t[4].pair_symbol+"",de,Pe,O,E=t[5].exchange_name+"",Y,Ke,ma,Z,Re=t[5].chain_name+"",Ye,Ze,ua,da,D,ga,qe,Ge=t[4].base_token_symbol_friendly+"",$e,pa,Oe,Ue=t[4].pair_symbol+"",xe,va,ie,Be=Ie(t[4].usd_price_latest)+"",ea,aa,ka,F,Ne=dt(t[4].price_change_24h)+"",ta,ya,Ae=(t[4].price_change_24h>0?"up":"down")+"",na,ra,ba,Ta,I,Sa,Ve,je=Ie(t[4].usd_volume_24h)+"",sa,wa,He,Le=Ie(t[4].usd_liquidity_latest)+"",la,Ea,Me=t[4].pair_symbol+"",ia,Da,Fe,$,Ia,Ca,Qe,Pa,Ra,Q,qa,Ga,ge,W,Oa,Ua,We,Ba,Na,X,Aa,Xe,ze=t[4].base_token_symbol_friendly+"",oa,Va,pe,Je=t[4].quote_token_symbol_friendly+"",ca,ja,Ha,La,U,ve,x,Ma,ke,ee,Fa,ye,ae,Qa,be,te,f;document.title=g=`
        `+t[4].pair_symbol+" trading on "+t[5].exchange_name+" on "+t[5].chain_name+`
    `,$=new bt({props:{relative:!0,timestamp:Date.parse(t[5].first_trade_at)}});function gt(a){t[12](a)}let Xa={};t[0]!==void 0&&(Xa.activeBucket=t[0]),Q=new St({props:Xa}),_t.push(()=>ft(Q,"activeBucket",gt));function pt(a){t[13](a)}let za={title:t[4].pair_name+" converted to USD"};return t[1]!==void 0&&(za.candles=t[1]),W=new Et({props:za}),_t.push(()=>ft(W,"candles",pt)),x=new ha({props:{pairId:t[4].pair_id,title:"Hourly",timeSpanTradeData:t[6],period:"hourly"}}),ee=new ha({props:{pairId:t[4].pair_id,title:"Daily",timeSpanTradeData:t[7],period:"daily"}}),ae=new ha({props:{pairId:t[4].pair_id,title:"Weekly",timeSpanTradeData:t[8],period:"weekly"}}),te=new ha({props:{pairId:t[4].pair_id,title:"Monthly",timeSpanTradeData:t[9],period:"monthly"}}),{c(){m=c("meta"),y=b(),s=c("div"),p=c("h1"),B=l(S),J=l(` trading on
        `),P=c("a"),re=l(K),A=l(`
        on `),N=c("a"),R=l(le),Ce=b(),n=c("p"),L=c("strong"),G=l(q),M=l(" trades as "),w=c("strong"),de=l(V),Pe=l(" on "),O=c("a"),Y=l(E),ma=l(`
        on `),Z=c("a"),Ye=l(Re),ua=l("."),da=b(),D=c("p"),ga=l("The price of "),qe=c("strong"),$e=l(Ge),pa=l(" in "),Oe=c("strong"),xe=l(Ue),va=l(" pair is "),ie=c("strong"),ea=l(Be),ka=l(` and is
        `),F=c("strong"),ta=l(Ne),ya=b(),na=l(Ae),ba=l(" for the last 24h."),Ta=b(),I=c("p"),Sa=l("The pair has "),Ve=c("strong"),sa=l(je),wa=l(" 24h trading volume with "),He=c("strong"),la=l(Le),Ea=l(` liquidity available at the moment.

        The trading of `),ia=l(Me),Da=l(" started at "),Fe=c("strong"),oe($.$$.fragment),Ia=l("."),Ca=b(),Qe=c("h2"),Pa=l("Price chart"),Ra=b(),oe(Q.$$.fragment),Ga=b(),ge=c("div"),oe(W.$$.fragment),Ua=b(),We=c("h2"),Ba=l("Price and liquidity movement"),Na=b(),X=c("p"),Aa=l("The price and liquidity of "),Xe=c("strong"),oa=l(ze),Va=l(" in this trading pair. The amounts are converted to US dollar through  "),pe=c("strong"),ca=l(Je),ja=l("/USD"),Ha=l("."),La=b(),U=c("div"),ve=c("div"),oe(x.$$.fragment),Ma=b(),ke=c("div"),oe(ee.$$.fragment),Fa=b(),ye=c("div"),oe(ae.$$.fragment),Qa=b(),be=c("div"),oe(te.$$.fragment),this.h()},l(a){const r=Tt('[data-svelte="svelte-113bnp"]',document.head);m=_(r,"META",{name:!0,content:!0}),r.forEach(o),y=T(a),s=_(a,"DIV",{class:!0});var d=h(s);p=_(d,"H1",{});var z=h(p);B=i(z,S),J=i(z,` trading on
        `),P=_(z,"A",{href:!0});var Te=h(P);re=i(Te,K),Te.forEach(o),A=i(z,`
        on `),N=_(z,"A",{href:!0});var Se=h(N);R=i(Se,le),Se.forEach(o),z.forEach(o),Ce=T(d),n=_(d,"P",{});var C=h(n);L=_(C,"STRONG",{});var we=h(L);G=i(we,q),we.forEach(o),M=i(C," trades as "),w=_(C,"STRONG",{});var Ee=h(w);de=i(Ee,V),Ee.forEach(o),Pe=i(C," on "),O=_(C,"A",{class:!0,href:!0});var Ja=h(O);Y=i(Ja,E),Ja.forEach(o),ma=i(C,`
        on `),Z=_(C,"A",{class:!0,href:!0});var Ka=h(Z);Ye=i(Ka,Re),Ka.forEach(o),ua=i(C,"."),C.forEach(o),da=T(d),D=_(d,"P",{});var j=h(D);ga=i(j,"The price of "),qe=_(j,"STRONG",{});var Ya=h(qe);$e=i(Ya,Ge),Ya.forEach(o),pa=i(j," in "),Oe=_(j,"STRONG",{});var Za=h(Oe);xe=i(Za,Ue),Za.forEach(o),va=i(j," pair is "),ie=_(j,"STRONG",{class:!0});var $a=h(ie);ea=i($a,Be),$a.forEach(o),ka=i(j,` and is
        `),F=_(j,"STRONG",{class:!0});var _a=h(F);ta=i(_a,Ne),ya=T(_a),na=i(_a,Ae),_a.forEach(o),ba=i(j," for the last 24h."),j.forEach(o),Ta=T(d),I=_(d,"P",{});var H=h(I);Sa=i(H,"The pair has "),Ve=_(H,"STRONG",{});var xa=h(Ve);sa=i(xa,je),xa.forEach(o),wa=i(H," 24h trading volume with "),He=_(H,"STRONG",{});var et=h(He);la=i(et,Le),et.forEach(o),Ea=i(H,` liquidity available at the moment.

        The trading of `),ia=i(H,Me),Da=i(H," started at "),Fe=_(H,"STRONG",{});var at=h(Fe);ce($.$$.fragment,at),at.forEach(o),Ia=i(H,"."),H.forEach(o),Ca=T(d),Qe=_(d,"H2",{});var tt=h(Qe);Pa=i(tt,"Price chart"),tt.forEach(o),Ra=T(d),ce(Q.$$.fragment,d),Ga=T(d),ge=_(d,"DIV",{class:!0});var nt=h(ge);ce(W.$$.fragment,nt),nt.forEach(o),Ua=T(d),We=_(d,"H2",{});var rt=h(We);Ba=i(rt,"Price and liquidity movement"),rt.forEach(o),Na=T(d),X=_(d,"P",{});var De=h(X);Aa=i(De,"The price and liquidity of "),Xe=_(De,"STRONG",{});var st=h(Xe);oa=i(st,ze),st.forEach(o),Va=i(De," in this trading pair. The amounts are converted to US dollar through  "),pe=_(De,"STRONG",{});var Wa=h(pe);ca=i(Wa,Je),ja=i(Wa,"/USD"),Wa.forEach(o),Ha=i(De,"."),De.forEach(o),La=T(d),U=_(d,"DIV",{class:!0});var ne=h(U);ve=_(ne,"DIV",{class:!0});var lt=h(ve);ce(x.$$.fragment,lt),lt.forEach(o),Ma=T(ne),ke=_(ne,"DIV",{class:!0});var it=h(ke);ce(ee.$$.fragment,it),it.forEach(o),Fa=T(ne),ye=_(ne,"DIV",{class:!0});var ot=h(ye);ce(ae.$$.fragment,ot),ot.forEach(o),Qa=T(ne),be=_(ne,"DIV",{class:!0});var ct=h(be);ce(te.$$.fragment,ct),ct.forEach(o),ne.forEach(o),d.forEach(o),this.h()},h(){u(m,"name","description"),u(m,"content",v="Price chart and technical analysis for trading "+t[4].pair_symbol+" on "+t[5].exchange_name+" on "+t[5].chain_name),u(P,"href",se="/"+t[3]+"/"+t[2]),u(N,"href",ue="/"+t[3]),u(O,"class","body-link"),u(O,"href",Ke="/"+t[3]+"/"+t[2]),u(Z,"class","body-link"),u(Z,"href",Ze="/"+t[3]),u(ie,"class",aa=""+(fa(t[10])+" svelte-lckpo2")),u(F,"class",ra=""+(fa(t[10])+" svelte-lckpo2")),u(ge,"class","chart-wrapper svelte-lckpo2"),u(ve,"class","col-md-3"),u(ke,"class","col-md-3"),u(ye,"class","col-md-3"),u(be,"class","col-md-3"),u(U,"class","row"),u(s,"class","container")},m(a,r){e(document.head,m),ht(a,y,r),ht(a,s,r),e(s,p),e(p,B),e(p,J),e(p,P),e(P,re),e(p,A),e(p,N),e(N,R),e(s,Ce),e(s,n),e(n,L),e(L,G),e(n,M),e(n,w),e(w,de),e(n,Pe),e(n,O),e(O,Y),e(n,ma),e(n,Z),e(Z,Ye),e(n,ua),e(s,da),e(s,D),e(D,ga),e(D,qe),e(qe,$e),e(D,pa),e(D,Oe),e(Oe,xe),e(D,va),e(D,ie),e(ie,ea),e(D,ka),e(D,F),e(F,ta),e(F,ya),e(F,na),e(D,ba),e(s,Ta),e(s,I),e(I,Sa),e(I,Ve),e(Ve,sa),e(I,wa),e(I,He),e(He,la),e(I,Ea),e(I,ia),e(I,Da),e(I,Fe),_e($,Fe,null),e(I,Ia),e(s,Ca),e(s,Qe),e(Qe,Pa),e(s,Ra),_e(Q,s,null),e(s,Ga),e(s,ge),_e(W,ge,null),e(s,Ua),e(s,We),e(We,Ba),e(s,Na),e(s,X),e(X,Aa),e(X,Xe),e(Xe,oa),e(X,Va),e(X,pe),e(pe,ca),e(pe,ja),e(X,Ha),e(s,La),e(s,U),e(U,ve),_e(x,ve,null),e(U,Ma),e(U,ke),_e(ee,ke,null),e(U,Fa),e(U,ye),_e(ae,ye,null),e(U,Qa),e(U,be),_e(te,be,null),f=!0},p(a,[r]){(!f||r&48)&&g!==(g=`
        `+a[4].pair_symbol+" trading on "+a[5].exchange_name+" on "+a[5].chain_name+`
    `)&&(document.title=g),(!f||r&48&&v!==(v="Price chart and technical analysis for trading "+a[4].pair_symbol+" on "+a[5].exchange_name+" on "+a[5].chain_name))&&u(m,"content",v),(!f||r&16)&&S!==(S=a[4].pair_symbol+"")&&k(B,S),(!f||r&32)&&K!==(K=a[5].exchange_name+"")&&k(re,K),(!f||r&12&&se!==(se="/"+a[3]+"/"+a[2]))&&u(P,"href",se),(!f||r&32)&&le!==(le=a[5].chain_name+"")&&k(R,le),(!f||r&8&&ue!==(ue="/"+a[3]))&&u(N,"href",ue),(!f||r&16)&&q!==(q=a[4].pair_name+"")&&k(G,q),(!f||r&16)&&V!==(V=a[4].pair_symbol+"")&&k(de,V),(!f||r&32)&&E!==(E=a[5].exchange_name+"")&&k(Y,E),(!f||r&12&&Ke!==(Ke="/"+a[3]+"/"+a[2]))&&u(O,"href",Ke),(!f||r&32)&&Re!==(Re=a[5].chain_name+"")&&k(Ye,Re),(!f||r&8&&Ze!==(Ze="/"+a[3]))&&u(Z,"href",Ze),(!f||r&16)&&Ge!==(Ge=a[4].base_token_symbol_friendly+"")&&k($e,Ge),(!f||r&16)&&Ue!==(Ue=a[4].pair_symbol+"")&&k(xe,Ue),(!f||r&16)&&Be!==(Be=Ie(a[4].usd_price_latest)+"")&&k(ea,Be),(!f||r&1024&&aa!==(aa=""+(fa(a[10])+" svelte-lckpo2")))&&u(ie,"class",aa),(!f||r&16)&&Ne!==(Ne=dt(a[4].price_change_24h)+"")&&k(ta,Ne),(!f||r&16)&&Ae!==(Ae=(a[4].price_change_24h>0?"up":"down")+"")&&k(na,Ae),(!f||r&1024&&ra!==(ra=""+(fa(a[10])+" svelte-lckpo2")))&&u(F,"class",ra),(!f||r&16)&&je!==(je=Ie(a[4].usd_volume_24h)+"")&&k(sa,je),(!f||r&16)&&Le!==(Le=Ie(a[4].usd_liquidity_latest)+"")&&k(la,Le),(!f||r&16)&&Me!==(Me=a[4].pair_symbol+"")&&k(ia,Me);const d={};r&32&&(d.timestamp=Date.parse(a[5].first_trade_at)),$.$set(d);const z={};!qa&&r&1&&(qa=!0,z.activeBucket=a[0],mt(()=>qa=!1)),Q.$set(z);const Te={};r&16&&(Te.title=a[4].pair_name+" converted to USD"),!Oa&&r&2&&(Oa=!0,Te.candles=a[1],mt(()=>Oa=!1)),W.$set(Te),(!f||r&16)&&ze!==(ze=a[4].base_token_symbol_friendly+"")&&k(oa,ze),(!f||r&16)&&Je!==(Je=a[4].quote_token_symbol_friendly+"")&&k(ca,Je);const Se={};r&16&&(Se.pairId=a[4].pair_id),r&64&&(Se.timeSpanTradeData=a[6]),x.$set(Se);const C={};r&16&&(C.pairId=a[4].pair_id),r&128&&(C.timeSpanTradeData=a[7]),ee.$set(C);const we={};r&16&&(we.pairId=a[4].pair_id),r&256&&(we.timeSpanTradeData=a[8]),ae.$set(we);const Ee={};r&16&&(Ee.pairId=a[4].pair_id),r&512&&(Ee.timeSpanTradeData=a[9]),te.$set(Ee)},i(a){f||(fe($.$$.fragment,a),fe(Q.$$.fragment,a),fe(W.$$.fragment,a),fe(x.$$.fragment,a),fe(ee.$$.fragment,a),fe(ae.$$.fragment,a),fe(te.$$.fragment,a),f=!0)},o(a){he($.$$.fragment,a),he(Q.$$.fragment,a),he(W.$$.fragment,a),he(x.$$.fragment,a),he(ee.$$.fragment,a),he(ae.$$.fragment,a),he(te.$$.fragment,a),f=!1},d(a){o(m),a&&o(y),a&&o(s),me($),me(Q),me(W),me(x),me(ee),me(ae),me(te)}}}async function Nt({page:t}){const g=t.params.exchange,m=t.params.chain,v=t.params.pair,y=new URLSearchParams({exchange_slug:g,chain_slug:m,pair_slug:v}),s=`${ut}/pair-details?${y}`;console.log("Loading",t,s);const p=await fetch(s);if(!p.ok)return p.status===404?{status:404,error:`Trading pair not found: ${v}`}:(console.error(p),{status:p.status,error:new Error(`Could not load data for trading pair: ${s}. See console for details.`)});const S=await p.json(),B=S.summary,J=S.additional_details,P=S.daily;return console.log("Pair details",S),{props:{exchange_slug:g,chain_slug:m,pair_slug:v,summary:B,details:J,daily:P}}}function It(t){const g=t.length;let v=Array(6).fill().map(y=>Array(g));return t.forEach(function(y,s){const p=Date.parse(y.ts)/1e3;v[0][s]=p,v[1][s]=y.o,v[2][s]=y.h,v[3][s]=y.l,v[4][s]=y.c,v[5][s]=y.v}),v}function Ct(t,g,m){let v;var y=this&&this.__awaiter||function(n,L,q,G){function M(w){return w instanceof q?w:new q(function(V){V(w)})}return new(q||(q=Promise))(function(w,V){function de(E){try{O(G.next(E))}catch(Y){V(Y)}}function Pe(E){try{O(G.throw(E))}catch(Y){V(Y)}}function O(E){E.done?w(E.value):M(E.value).then(de,Pe)}O((G=G.apply(n,L||[])).next())})};let{exchange_slug:s}=g,{chain_slug:p}=g,{pair_slug:S}=g,{summary:B}=g,{details:J}=g,{hourly:P,daily:K,weekly:re,monthly:se}=g,{candles:A=null}=g,N;N=window.location.hash;function le(n){return y(this,void 0,void 0,function*(){if(!n)return;m(1,A=null);const L={pair_id:B.pair_id,time_bucket:n},q=new URLSearchParams(L),G=`${ut}/candles?${q}`;console.log("Fetching candles for bucket",n,G);const M=yield fetch(G);if(!M.ok){console.error(M);return}const w=yield M.json();m(1,A=It(w))})}let{bucket:R=wt(N)}=g;console.log("Got hash",N,"bucket",R);function ue(n){R=n,m(0,R)}function Ce(n){A=n,m(1,A)}return t.$$set=n=>{"exchange_slug"in n&&m(2,s=n.exchange_slug),"chain_slug"in n&&m(3,p=n.chain_slug),"pair_slug"in n&&m(11,S=n.pair_slug),"summary"in n&&m(4,B=n.summary),"details"in n&&m(5,J=n.details),"hourly"in n&&m(6,P=n.hourly),"daily"in n&&m(7,K=n.daily),"weekly"in n&&m(8,re=n.weekly),"monthly"in n&&m(9,se=n.monthly),"candles"in n&&m(1,A=n.candles),"bucket"in n&&m(0,R=n.bucket)},t.$$.update=()=>{t.$$.dirty&1&&console.log(`The active bucket is ${R}`),t.$$.dirty&16&&m(10,v=B.price_change_24h>=0?"price-change-green":"price-change-red"),t.$$.dirty&1&&le(R)},[R,A,s,p,B,J,P,K,re,se,v,S,ue,Ce]}class At extends vt{constructor(g){super();kt(this,g,Ct,Dt,yt,{exchange_slug:2,chain_slug:3,pair_slug:11,summary:4,details:5,hourly:6,daily:7,weekly:8,monthly:9,candles:1,bucket:0})}}export{At as default,Nt as load};
